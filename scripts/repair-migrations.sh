#!/bin/bash
# Repair migration history by marking remote migrations as reverted
# This tells Supabase to ignore migrations that exist remotely but not locally

echo "Repairing migration history..."
echo "Marking remote-only migrations as reverted..."

supabase migration repair --status reverted \
  20251010130456 20251010131426 20251014020920 20251014021930 20251014172236 \
  20251014172249 20251014185634 20251014190144 20251014212743 20251014212750 \
  20251016164518 20251017041344 20251017041849 20251017043442 20251017180111 \
  20251017180942 20251021165713 20251021165720 20251021171412 20251021171416 \
  20251021234722 20251022051048 20251022210523 20251024032255 20251024035318 \
  20251024174122 20251025191637 20251026211437 20251026212641 20251031154119 \
  20251031154134 20251031154417 20251031154430 20251031180516 20251031180715 \
  20251031180856 20251031210033 20251031211942 20251101001419 20251101013907 \
  20251102201843 20251103012109 20251103012113 20251103012117 20251103161958 \
  20251103162200 20251103164410 20251103171813 20251103173402 20251103235400 \
  20251104003147 20251104051310 20251104052628 20251104181048 20251104194308 \
  20251104194833 20251104195427 20251104195731 20251104200110 20251106222639 \
  20251107000633 20251107013659 20251108025032 20251110172430 20251116220100 \
  20251116220200 20251116221847 20251116222301 20251116223653 20251116225734 \
  20251116233436 20251116233845 20251116234650 20251116234700 20251117001158 \
  20251117001200 20251117003529 20251117003530 20251117003531 20251117004000 \
  20251117030813 20251117030816 20251117032003 20251117032041 20251117033052 \
  20251117033239 20251117034809 20251117034822 20251117040000 20251117052247 \
  20251117052658 20251117062058 20251118081354 20251118083105 20251118235905 \
  20251119000000 20251119000100 20251119000200 20251119140855 20251119141148 \
  20251119194416 20251119200157 20251119200158 20251119200159 20251119200201 \
  20251119200202 20251119200203 20251119200204 20251119200205 20251119200206 \
  20251119200207 20251119200208 20251119200209 20251119200210 20251119200211 \
  20251119200212 20251119200213 20251119200221 20251119200619 20251119200631 \
  20251119200632 20251119200636 20251119200641 20251119200700 20251119200701 \
  20251119214556 20251119214600 20251120232757 20251121042331

echo "âœ… Migration history repaired"
echo "Now you can run: supabase db push"
